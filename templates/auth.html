<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Login or Sign up for StudentHub - Access all campus services">
    <title>Login / Sign Up - StudentHub</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
</head>

<body class="auth-page">
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="StudentHub Logo" class="nav-logo">
                <span>StudentHub</span>
            </div>
            <a href="{{ url_for('index') }}" class="btn btn-secondary btn-sm">
                <i class="fas fa-home"></i> Back to Home
            </a>
        </div>
    </nav>

    <!-- Auth Section -->
    <section class="auth-section">
        <div class="auth-container">
            <!-- Role Selection (shown by default) -->
            <div class="role-selection" id="roleSelection">
                <div class="auth-branding">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="StudentHub Logo"
                        class="auth-logo">
                    <h1>StudentHub</h1>
                    <p>Your Campus Services Platform</p>
                </div>

                <div class="role-cards">
                    <div class="role-card" onclick="selectRole('student')">
                        <div class="role-icon">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3>Student</h3>
                        <p>Apply for railway concession</p>
                    </div>

                    <div class="role-card" onclick="selectRole('worker')">
                        <div class="role-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <h3>Worker</h3>
                        <p>Manage concession requests</p>
                    </div>
                </div>
            </div>

            <!-- Student Login/Signup Form -->
            <div class="auth-form-container" id="studentAuth" style="display: none;">
                <div class="auth-header">
                    <button class="back-btn" onclick="backToRoleSelection()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="StudentHub Logo"
                        class="auth-logo">
                    <h2>Student Portal</h2>
                </div>

                <!-- Tab Switcher -->
                <div class="tab-switcher">
                    <button class="tab-btn active" onclick="switchTab('student-login')">Login</button>
                    <button class="tab-btn" onclick="switchTab('student-signup')">Sign Up</button>
                </div>

                <!-- Student Login Form -->
                <form class="auth-form" id="student-login" action="{{ url_for('student_login') }}" method="POST">
                    <div class="form-group">
                        <label for="student-login-id">
                            <i class="fas fa-id-card"></i> Roll Number or Email
                        </label>
                        <input type="text" id="student-login-id" name="login_id"
                            placeholder="Enter roll number or email" required>
                    </div>

                    <div class="form-group">
                        <label for="student-login-password">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="student-login-password" name="password"
                                placeholder="Enter password" required>
                            <button type="button" class="toggle-password"
                                onclick="togglePassword('student-login-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </form>

                <!-- Student Signup Form -->
                <form class="auth-form" id="student-signup" style="display: none;"
                    action="{{ url_for('student_register') }}" method="POST">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="student-signup-name">
                                <i class="fas fa-user"></i> Full Name
                            </label>
                            <input type="text" id="student-signup-name" name="full_name" placeholder="Enter full name"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="student-signup-roll">
                                <i class="fas fa-id-card"></i> Roll Number
                            </label>
                            <input type="text" id="student-signup-roll" name="roll_number" placeholder="e.g., 2024001"
                                required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="student-signup-email">
                            <i class="fas fa-envelope"></i> Email
                        </label>
                        <input type="email" id="student-signup-email" name="email" placeholder="your.email@college.edu"
                            required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="student-signup-department">
                                <i class="fas fa-building"></i> Department
                            </label>
                            <select id="student-signup-department" name="department" required>
                                <option value="">Select Department</option>
                                <option value="Computer Engineering">Computer Engineering</option>
                                <option value="Information Technology">Information Technology</option>
                                <option value="Electronics">Electronics</option>
                                <option value="Mechanical">Mechanical</option>
                                <option value="Civil">Civil</option>
                                <option value="Electrical">Electrical</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="student-signup-year">
                                <i class="fas fa-calendar"></i> Year
                            </label>
                            <select id="student-signup-year" name="year" required>
                                <option value="">Select Year</option>
                                <option value="FE">First Year (FE)</option>
                                <option value="SE">Second Year (SE)</option>
                                <option value="TE">Third Year (TE)</option>
                                <option value="BE">Final Year (BE)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="student-signup-division">
                                <i class="fas fa-users"></i> Division
                            </label>
                            <select id="student-signup-division" name="division" required>
                                <option value="">Select Division</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="student-signup-phone">
                                <i class="fas fa-phone"></i> Phone Number
                            </label>
                            <input type="tel" id="student-signup-phone" name="phone_number"
                                placeholder="10-digit number" pattern="[0-9]{10}">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="student-signup-password">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="student-signup-password" name="password"
                                placeholder="Create password (min 6 characters)" required minlength="6">
                            <button type="button" class="toggle-password"
                                onclick="togglePassword('student-signup-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="student-signup-confirm">
                            <i class="fas fa-lock"></i> Confirm Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="student-signup-confirm" name="confirm_password"
                                placeholder="Re-enter password" required minlength="6">
                            <button type="button" class="toggle-password"
                                onclick="togglePassword('student-signup-confirm')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </form>
            </div>

            <!-- Worker Login/Signup Form -->
            <div class="auth-form-container" id="workerAuth" style="display: none;">
                <div class="auth-header">
                    <button class="back-btn" onclick="backToRoleSelection()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="StudentHub Logo"
                        class="auth-logo">
                    <h2>Worker Portal</h2>
                </div>

                <!-- Tab Switcher -->
                <div class="tab-switcher">
                    <button class="tab-btn active" onclick="switchTab('worker-login')">Login</button>
                    <button class="tab-btn" onclick="switchTab('worker-signup')">Sign Up</button>
                </div>

                <!-- Worker Login Form -->
                <form class="auth-form" id="worker-login" action="{{ url_for('worker_login') }}" method="POST">
                    <div class="form-group">
                        <label for="worker-login-id">
                            <i class="fas fa-id-badge"></i> Employee ID or Email
                        </label>
                        <input type="text" id="worker-login-id" name="login_id" placeholder="Enter employee ID or email"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="worker-login-password">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="worker-login-password" name="password"
                                placeholder="Enter password" required>
                            <button type="button" class="toggle-password"
                                onclick="togglePassword('worker-login-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-secondary btn-full">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </form>

                <!-- Worker Signup Form -->
                <form class="auth-form" id="worker-signup" style="display: none;"
                    action="{{ url_for('worker_register') }}" method="POST">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="worker-signup-name">
                                <i class="fas fa-user"></i> Full Name
                            </label>
                            <input type="text" id="worker-signup-name" name="full_name" placeholder="Enter full name"
                                required>
                        </div>

                        <div class="form-group">
                            <label for="worker-signup-empid">
                                <i class="fas fa-id-badge"></i> Employee ID
                            </label>
                            <input type="text" id="worker-signup-empid" name="employee_id" placeholder="e.g., EMP001"
                                required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="worker-signup-email">
                            <i class="fas fa-envelope"></i> Email
                        </label>
                        <input type="email" id="worker-signup-email" name="email" placeholder="your.email@college.edu"
                            required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="worker-signup-department">
                                <i class="fas fa-building"></i> Department
                            </label>
                            <select id="worker-signup-department" name="department" required>
                                <option value="">Select Department</option>
                                <option value="Administration">Administration</option>
                                <option value="Academic Office">Academic Office</option>
                                <option value="Student Affairs">Student Affairs</option>
                                <option value="IT Department">IT Department</option>
                                <option value="Accounts">Accounts</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="worker-signup-phone">
                                <i class="fas fa-phone"></i> Phone Number
                            </label>
                            <input type="tel" id="worker-signup-phone" name="phone_number" placeholder="10-digit number"
                                pattern="[0-9]{10}">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="worker-signup-password">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="worker-signup-password" name="password"
                                placeholder="Create password (min 6 characters)" required minlength="6">
                            <button type="button" class="toggle-password"
                                onclick="togglePassword('worker-signup-password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="worker-signup-confirm">
                            <i class="fas fa-lock"></i> Confirm Password
                        </label>
                        <div class="password-input">
                            <input type="password" id="worker-signup-confirm" name="confirm_password"
                                placeholder="Re-enter password" required minlength="6">
                            <button type="button" class="toggle-password"
                                onclick="togglePassword('worker-signup-confirm')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-secondary btn-full">
                        <i class="fas fa-user-plus"></i> Create Worker Account
                    </button>
                </form>
            </div>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
            <div class="flash-message flash-{{ category }}">
                <i class="fas fa-{{ 'check-circle' if category == 'success' else 'exclamation-circle' }}"></i>
                {{ message }}
                <button onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
    </section>

    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
</body>

</html>